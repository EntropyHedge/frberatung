<!doctype html>
<html lang="de" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Onboarding – Fragebogen</title>
  <meta name="description" content="Fragebogen zur Ermittlung Ihres Risikoprofils und Ziels." />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.4.1/flowbite.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/onboarding.css') }}" />
  <style>:root { color-scheme: light; }</style>
</head>

<body class="bg-white text-ink selection:bg-accent/10 selection:text-ink font-sans">
  <div aria-hidden="true" class="fixed inset-0 -z-10 accent-gradient"></div>
  <div aria-hidden="true" class="fixed inset-0 -z-10 bg-grid"></div>

  {% include 'partials/home_navbar.html' %}

  <main id="main" class="max-w-7xl mx-auto px-4 md:px-6">
    <section class="pt-20 md:pt-28 pb-10">
      <div class="max-w-3xl">
        <h1 class="font-display text-4xl md:text-5xl tracking-tight leading-tight text-ink">In wenigen Minuten zu Ihrem persönlichen Risiko‑Profil</h1>
        <p class="mt-4 text-ink-muted text-base md:text-lg">Beantworten Sie ein paar einfache Fragen. Wir übersetzen diese in einen klaren Risiko‑Score (0–100) und leiten daraus Ihren Portfolio‑Blueprint ab.</p>
        <div class="mt-6 flex flex-wrap gap-3 text-sm text-ink-muted">
          <span class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-surface-50 ring-1 ring-surface-200">⏱️ 10–15 Minuten</span>
          <span class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-surface-50 ring-1 ring-surface-200">🔒 Datenschutz‑konform</span>
          <span class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-surface-50 ring-1 ring-surface-200">📄 Keine Fachkenntnisse nötig</span>
        </div>
      </div>
    </section>

    <section class="grid lg:grid-cols-3 gap-8 pb-24">
      <!-- Form -->
      <form id="onboarding-form" class="lg:col-span-2 space-y-8">
        <!-- Profile -->
        <div class="rounded-2xl bg-white p-6 ring-1 ring-inset ring-surface-200">
          <div class="flex items-start justify-between gap-4 mb-5">
            <div>
              <h2 class="text-lg font-semibold">Über Sie</h2>
              <p class="text-sm text-ink-muted mt-1">Alter, Einkommen und Rücklagen – die Basis für solide Empfehlungen.</p>
            </div>
            <span class="inline-flex h-8 px-3 items-center rounded-md bg-accent/10 text-accent text-xs font-semibold ring-1 ring-accent/20">Schritt 1</span>
          </div>
          <div class="grid sm:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium mb-1">Wie alt sind Sie?</label>
              <input type="number" min="0" step="1" class="w-full rounded-xl border border-surface-200 px-3.5 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="age" placeholder="z. B. 35" required />
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Geplantes Rentenalter</label>
              <input type="number" min="0" step="1" class="w-full rounded-xl border border-surface-200 px-3.5 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="retirement_age" placeholder="z. B. 65" required />
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Investierbares Vermögen</label>
              <div class="relative">
                <input type="number" min="0" step="0.01" class="w-full rounded-xl border border-surface-200 pl-3.5 pr-12 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="investable_assets" placeholder="z. B. 120000" required />
                <span class="absolute right-3 top-2.5 text-sm text-ink-muted">€</span>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Vermögen gesamt</label>
              <div class="relative">
                <input type="number" min="0" step="0.01" class="w-full rounded-xl border border-surface-200 pl-3.5 pr-12 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="net_worth" placeholder="z. B. 250000" required />
                <span class="absolute right-3 top-2.5 text-sm text-ink-muted">€</span>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Nettoeinkommen p.a.</label>
              <div class="relative">
                <input type="number" min="0" step="0.01" class="w-full rounded-xl border border-surface-200 pl-3.5 pr-12 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="annual_income_after_tax" placeholder="z. B. 65000" required />
                <span class="absolute right-3 top-2.5 text-sm text-ink-muted">€</span>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Essentielle Ausgaben p.a.</label>
              <div class="relative">
                <input type="number" min="0" step="0.01" class="w-full rounded-xl border border-surface-200 pl-3.5 pr-12 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="annual_essential_spend" placeholder="z. B. 36000" required />
                <span class="absolute right-3 top-2.5 text-sm text-ink-muted">€</span>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Geplante jährliche Beiträge</label>
              <div class="relative">
                <input type="number" min="0" step="0.01" class="w-full rounded-xl border border-surface-200 pl-3.5 pr-12 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="annual_contribution" placeholder="z. B. 12000" required />
                <span class="absolute right-3 top-2.5 text-sm text-ink-muted">€</span>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Gesamtschulden</label>
              <div class="relative">
                <input type="number" min="0" step="0.01" class="w-full rounded-xl border border-surface-200 pl-3.5 pr-12 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="total_debt" placeholder="z. B. 80000" required />
                <span class="absolute right-3 top-2.5 text-sm text-ink-muted">€</span>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Jährliche Kreditrate</label>
              <div class="relative">
                <input type="number" min="0" step="0.01" class="w-full rounded-xl border border-surface-200 pl-3.5 pr-12 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="annual_debt_service" placeholder="z. B. 12000" required />
                <span class="absolute right-3 top-2.5 text-sm text-ink-muted">€</span>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Notgroschen (in Monaten Ausgaben)</label>
              <input type="number" min="0" step="0.1" class="w-full rounded-xl border border-surface-200 px-3.5 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="emergency_fund_months" placeholder="z. B. 2" required />
              <p class="text-xs text-ink-muted mt-1">Empfehlung: mind. 3 Monate als Reserve.</p>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Land</label>
              <input type="text" class="w-full rounded-xl border border-surface-200 px-3.5 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="country" placeholder="DE" required />
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Realer risikofreier Zins (optional)</label>
              <input type="number" step="0.0001" class="w-full rounded-xl border border-surface-200 px-3.5 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="rf_real" placeholder="0.0" />
              <p class="text-xs text-ink-muted mt-1">Wenn leer, verwenden wir 0,0 %.</p>
            </div>
          </div>
          <div class="grid sm:grid-cols-3 gap-4 mt-4">
            <div>
              <label class="block text-sm font-medium mb-1">Nächstes Ziel: Betrag</label>
              <div class="relative">
                <input type="number" min="0" step="0.01" class="w-full rounded-xl border border-surface-200 pl-3.5 pr-12 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="ntl_amount" placeholder="z. B. 15000" required />
                <span class="absolute right-3 top-2.5 text-sm text-ink-muted">€</span>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Fällig in (Jahren)</label>
              <input type="number" min="0" step="0.1" class="w-full rounded-xl border border-surface-200 px-3.5 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="ntl_years" placeholder="z. B. 2" required />
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Abdeckung</label>
              <select class="w-full rounded-xl border border-surface-200 px-3.5 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="ntl_coverage" required>
                <option value="not_covered">nicht abgedeckt</option>
                <option value="partial">teilweise</option>
                <option value="covered_or_far">abgedeckt oder >3J</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Risk Tolerance -->
        <div class="rounded-2xl bg-white p-6 ring-1 ring-inset ring-surface-200">
          <div class="flex items-start justify-between gap-4 mb-5">
            <div>
              <h2 class="text-lg font-semibold">Verhalten & Erfahrung</h2>
              <p class="text-sm text-ink-muted mt-1">Wie würden Sie bei Schwankungen reagieren, und welche Erfahrung bringen Sie mit?</p>
            </div>
            <span class="inline-flex h-8 px-3 items-center rounded-md bg-accent/10 text-accent text-xs font-semibold ring-1 ring-accent/20">Schritt 2</span>
          </div>
          <div class="space-y-6">
            <div>
              <label class="block text-sm font-medium mb-2">Wie viel zwischenzeitlichen Verlust (1 Jahr) können Sie aushalten?</label>
              <div class="grid sm:grid-cols-4 gap-2" data-rt="QRT1">
                {% for label in ['<=5%','10%','15%','20%','30%','40%','>=50%'] %}
                <label class="flex items-center gap-2 px-3 py-2 rounded-xl ring-1 ring-surface-200 hover:bg-surface-50 cursor-pointer"><input type="radio" name="QRT1" value="{{label}}" required class="text-accent focus:ring-accent"> <span>{{label}}</span></label>
                {% endfor %}
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">Was tun Sie bei −20 % in einem Monat?</label>
              <div class="grid sm:grid-cols-4 gap-2" data-rt="QRT2">
                {% for label in ['sell all','sell some','hold','buy more'] %}
                <label class="flex items-center gap-2 px-3 py-2 rounded-xl ring-1 ring-surface-200 hover:bg-surface-50 cursor-pointer"><input type="radio" name="QRT2" value="{{label}}" required class="text-accent focus:ring-accent"> <span>{{label}}</span></label>
                {% endfor %}
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">Wie erfahren sind Sie beim Investieren?</label>
              <div class="grid sm:grid-cols-5 gap-2" data-rt="QRT3">
                {% for label in ['new','1-3y','3-7y','7-15y','>15y'] %}
                <label class="flex items-center gap-2 px-3 py-2 rounded-xl ring-1 ring-surface-200 hover:bg-surface-50 cursor-pointer"><input type="radio" name="QRT3" value="{{label}}" required class="text-accent focus:ring-accent"> <span>{{label}}</span></label>
                {% endfor %}
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">Was ist Ihnen wichtiger?</label>
              <div class="grid sm:grid-cols-5 gap-2" data-rt="QRT4">
                {% for label in ['strongly agree','agree','neutral','disagree','strongly disagree'] %}
                <label class="flex items-center gap-2 px-3 py-2 rounded-xl ring-1 ring-surface-200 hover:bg-surface-50 cursor-pointer"><input type="radio" name="QRT4" value="{{label}}" required class="text-accent focus:ring-accent"> <span>{{label}}</span></label>
                {% endfor %}
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-2">Und in früheren Crashs?</label>
              <div class="grid sm:grid-cols-4 gap-2" data-rt="QRT5">
                {% for label in ['sold near lows','paused contributions','held','rebalanced/bought'] %}
                <label class="flex items-center gap-2 px-3 py-2 rounded-xl ring-1 ring-surface-200 hover:bg-surface-50 cursor-pointer"><input type="radio" name="QRT5" value="{{label}}" required class="text-accent focus:ring-accent"> <span>{{label}}</span></label>
                {% endfor %}
              </div>
            </div>
          </div>
        </div>

        <!-- Capacity / Income Stability -->
        <div class="rounded-2xl bg-white p-6 ring-1 ring-inset ring-surface-200">
          <div class="flex items-start justify-between gap-4 mb-5">
            <div>
              <h2 class="text-lg font-semibold">Einkommensstabilität</h2>
              <p class="text-sm text-ink-muted mt-1">Wie planbar ist Ihr Einkommen?</p>
            </div>
            <span class="inline-flex h-8 px-3 items-center rounded-md bg-accent/10 text-accent text-xs font-semibold ring-1 ring-accent/20">Schritt 3</span>
          </div>
          <div class="grid sm:grid-cols-4 gap-2">
            {% for label,val in [('Auftragsbasiert','contract'),('Gemischt','mixed'),('Fest angestellt','stable_employee'),('Verbeamtet/Tenure','tenured')] %}
            <label class="flex items-center gap-2 px-3 py-2 rounded-xl ring-1 ring-surface-200 hover:bg-surface-50 cursor-pointer"><input type="radio" name="income_stability" value="{{val}}" required class="text-accent focus:ring-accent"> <span>{{label}}</span></label>
            {% endfor %}
          </div>
        </div>

        <!-- Need / Goal -->
        <div class="rounded-2xl bg-white p-6 ring-1 ring-inset ring-surface-200">
          <div class="flex items-start justify-between gap-4 mb-5">
            <div>
              <h2 class="text-lg font-semibold">Ihr Ziel</h2>
              <p class="text-sm text-ink-muted mt-1">Wählen Sie entweder jährlichen Bedarf im Ruhestand oder ein Zielvermögen.</p>
            </div>
            <span class="inline-flex h-8 px-3 items-center rounded-md bg-accent/10 text-accent text-xs font-semibold ring-1 ring-accent/20">Schritt 4</span>
          </div>
          <div class="flex items-center gap-4 mb-4">
            <label class="flex items-center gap-2"><input type="radio" name="need_mode" value="target_spend" checked class="text-accent focus:ring-accent"> <span>Jährlicher Bedarf</span></label>
            <label class="flex items-center gap-2"><input type="radio" name="need_mode" value="w_target" class="text-accent focus:ring-accent"> <span>Zielvermögen</span></label>
          </div>
          <div class="grid sm:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium mb-1">Jährlicher Bedarf</label>
              <div class="relative">
                <input type="number" min="0" step="0.01" class="w-full rounded-xl border border-surface-200 pl-3.5 pr-12 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="target_spend" placeholder="z. B. 36000" />
                <span class="absolute right-3 top-2.5 text-sm text-ink-muted">€</span>
              </div>
              <p class="text-xs text-ink-muted mt-1">Standardannahme: Zielvermögen ≈ Bedarf / 0,03.</p>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Zielvermögen</label>
              <div class="relative">
                <input type="number" min="0" step="0.01" class="w-full rounded-xl border border-surface-200 pl-3.5 pr-12 py-2.5 bg-white focus:outline-none focus:ring-2 focus:ring-accent/30" name="w_target" placeholder="z. B. 1200000" />
                <span class="absolute right-3 top-2.5 text-sm text-ink-muted">€</span>
              </div>
            </div>
          </div>
        </div>

        <div class="flex items-center gap-3">
          <button id="submit" type="submit" class="px-6 py-3.5 rounded-xl bg-accent hover:bg-accent/90 text-white font-semibold shadow-soft">Score berechnen</button>
          <span id="form-error" class="text-sm text-red-600"></span>
        </div>
      </form>

      <!-- Result panel -->
      <aside class="lg:col-span-1">
        <div id="result" class="rounded-2xl bg-white p-6 ring-1 ring-inset ring-surface-200 hidden">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-lg font-semibold">Ihr Ergebnis</h2>
            <span class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-accent text-white font-bold text-lg" id="rs_badge">–</span>
          </div>
          <div class="space-y-3 text-sm">
            <div class="flex items-center justify-between"><span class="text-ink-muted">Risiko‑Score (0–100)</span> <span id="rs">–</span></div>
            <div class="flex items-center justify-between"><span class="text-ink-muted">Toleranz · Kapazität · Bedarf</span> <span><span id="rt">–</span> · <span id="rc">–</span> · <span id="rn">–</span></span></div>
            <div class="flex items-center justify-between"><span class="text-ink-muted">Mehrbedarf vs. risikofrei (pp)</span> <span id="need_gap">–</span></div>
            <div id="annotations" class="text-ink-muted"></div>
          </div>
          <div class="mt-5 p-3 rounded-xl bg-surface-50 ring-1 ring-surface-200 text-xs text-ink-muted">Hinweis: Der Score ist eine Orientierung. Wir berücksichtigen Liquiditätsreserve und nahe Ziele.</div>
        </div>
      </aside>
    </section>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.4.1/flowbite.min.js"></script>
  <script src="{{ url_for('static', filename='js/onboarding.js') }}"></script>
</body>
</html>


